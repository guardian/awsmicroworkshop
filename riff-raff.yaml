stacks: [playground]
regions: [eu-west-1]
templates:
  awsmicroworkshop:
    type: aws-lambda
    app: awsmicroworkshop
    contentDirectory: awsmicroworkshop
    parameters:
      bucket: gu-jr-microservice-workshop-dist
      functionNames: [awsmicroworkshop-]
      fileName: awsmicroworkshop.zip
      prefixStack: false
deployments:
  awsmicroworkshop-upload:
    template: awsmicroworkshop
    actions: [uploadLambda]
  awsmicroworkshop-cfn:
    type: cloud-formation
    app: awsmicroworkshop
    parameters:
      prependStackToCloudFormationStackName: false
      cloudFormationStackName: awsmicroworkshop
      templatePath: cfn.yaml
    dependencies: [awsmicroworkshop-upload]
  awsmicroworkshop-lambda-update:
    template: awsmicroworkshop
    actions: [updateLambda]
    dependencies: [awsmicroworkshop-cfn]